schema {
  query: Query
  mutation: Mutation
}

enum Cloud {
  AWS
  AZURE
  GCP
}

type sandbox {
  account_id: String!
  account_name: String!
  available: String
  assigned_until: String
  assigned_since: String
  assigned_to: String
}

interface cloudSandbox {
  id: ID!
  assigned_until: String!
  assigned_since: String!
  assigned_to: String!
}

type awsSandbox implements cloudSandbox {
  id: ID!
  assigned_until: String!
  assigned_since: String!
  assigned_to: String!
  account_name: String!
}

type azureSandbox implements cloudSandbox {
  id: ID!
  assigned_until: String!
  assigned_since: String!
  assigned_to: String!
  pipeline_id: String!
}

type createNewSandboxResponse {
  sandbox: sandbox!
}

type listSandboxesResponse {
  sandboxes: [sandbox]
}

type Query {
  listSandboxes(Email: String!): listSandboxesResponse
}

union leaseSandBoxResult = azureSandbox | awsSandbox

# todo Delete
type leaseASandBoxResponse {
  message: String!
  sandbox: sandbox!
}

type Mutation {
  deallocateSandbox(Account_id: String!): leaseASandBoxResponse
  leaseSandBox(
    Email: String!
    Lease_time: String!
    Cloud: Cloud!
  ): leaseSandBoxResult!
  createNewSandbox(
    account_id: String!
    account_name: String!
  ): createNewSandboxResponse!
}
